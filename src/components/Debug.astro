
<script>
// Debug completo del estado de la aplicación
function debugCompleto() {
    console.log("🔍 =================================");
    console.log("🔍 DEBUG COMPLETO - Estado General");
    console.log("🔍 =================================");
    
    // Información del entorno
    console.log("📍 URL y Rutas:");
    console.log("   - URL actual:", window.location.href);
    console.log("   - Origin:", window.location.origin);
    console.log("   - Pathname:", window.location.pathname);
    console.log("   - Base URI:", document.baseURI);
    
    // Verificar recursos CSS
    console.log("🎨 Hojas de estilo:");
    const stylesheets = document.querySelectorAll('link[rel="stylesheet"]');
    stylesheets.forEach((sheet, index) => {
        console.log(`   ${index + 1}. ${sheet.href}`);
        if (sheet.sheet) {
            console.log(`      ✅ Cargada (${sheet.sheet.cssRules?.length || 0} reglas)`);
        } else {
            console.log(`      ❌ No cargada`);
        }
    });
    
    // Verificar scripts
    console.log("📜 Scripts:");
    const scripts = document.querySelectorAll('script[src]');
    scripts.forEach((script, index) => {
        console.log(`   ${index + 1}. ${script.src}`);
    });
    
    // Verificar librerías
    console.log("📚 Librerías:");
    console.log("   - Leaflet:", typeof L !== 'undefined' ? `✅ v${L.version}` : '❌ No disponible');
    console.log("   - Tailwind:", document.querySelector('script[src*="tailwind"]') ? '✅ CDN detectado' : '❌ No detectado');
    
    // Verificar elementos DOM
    console.log("🏗️ Elementos DOM:");
    console.log("   - Container #map:", document.getElementById('map') ? '✅ Encontrado' : '❌ No encontrado');
    const mapEl = document.getElementById('map');
    if (mapEl) {
        console.log(`      Dimensiones: ${mapEl.offsetWidth}x${mapEl.offsetHeight}`);
        console.log(`      Clases: ${mapEl.className}`);
    }
    
    // Verificar errores de red
    console.log("🌐 Estado de red:");
    console.log("   - Online:", navigator.onLine ? '✅' : '❌');
    
    // Verificar variables globales
    console.log("🌍 Variables globales:");
    console.log("   - window.miMapa:", typeof window.miMapa !== 'undefined' ? '✅ Disponible' : '❌ No disponible');
    
    console.log("🔍 =================================");
}

// Ejecutar debug inicial
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(debugCompleto, 2000); // Esperar 2 segundos para que todo cargue
});

// Debug de errores de recursos
window.addEventListener('error', function(e) {
    if (e.target !== window) {
        console.error("❌ DEBUG - Error cargando recurso:", {
            elemento: e.target.tagName,
            src: e.target.src || e.target.href,
            error: e.message
        });
    }
});

// Debug de errores no capturados
window.addEventListener('unhandledrejection', function(e) {
    console.error("❌ DEBUG - Promise rechazada:", e.reason);
});
</script>