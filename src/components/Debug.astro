
<script>
// Debug completo del estado de la aplicaciÃ³n
function debugCompleto() {
    console.log("ğŸ” =================================");
    console.log("ğŸ” DEBUG COMPLETO - Estado General");
    console.log("ğŸ” =================================");
    
    // InformaciÃ³n del entorno
    console.log("ğŸ“ URL y Rutas:");
    console.log("   - URL actual:", window.location.href);
    console.log("   - Origin:", window.location.origin);
    console.log("   - Pathname:", window.location.pathname);
    console.log("   - Base URI:", document.baseURI);
    
    // Verificar recursos CSS
    console.log("ğŸ¨ Hojas de estilo:");
    const stylesheets = document.querySelectorAll('link[rel="stylesheet"]');
    stylesheets.forEach((sheet, index) => {
        console.log(`   ${index + 1}. ${sheet.href}`);
        if (sheet.sheet) {
            console.log(`      âœ… Cargada (${sheet.sheet.cssRules?.length || 0} reglas)`);
        } else {
            console.log(`      âŒ No cargada`);
        }
    });
    
    // Verificar scripts
    console.log("ğŸ“œ Scripts:");
    const scripts = document.querySelectorAll('script[src]');
    scripts.forEach((script, index) => {
        console.log(`   ${index + 1}. ${script.src}`);
    });
    
    // Verificar librerÃ­as
    console.log("ğŸ“š LibrerÃ­as:");
    console.log("   - Leaflet:", typeof L !== 'undefined' ? `âœ… v${L.version}` : 'âŒ No disponible');
    console.log("   - Tailwind:", document.querySelector('script[src*="tailwind"]') ? 'âœ… CDN detectado' : 'âŒ No detectado');
    
    // Verificar elementos DOM
    console.log("ğŸ—ï¸ Elementos DOM:");
    console.log("   - Container #map:", document.getElementById('map') ? 'âœ… Encontrado' : 'âŒ No encontrado');
    const mapEl = document.getElementById('map');
    if (mapEl) {
        console.log(`      Dimensiones: ${mapEl.offsetWidth}x${mapEl.offsetHeight}`);
        console.log(`      Clases: ${mapEl.className}`);
    }
    
    // Verificar errores de red
    console.log("ğŸŒ Estado de red:");
    console.log("   - Online:", navigator.onLine ? 'âœ…' : 'âŒ');
    
    // Verificar variables globales
    console.log("ğŸŒ Variables globales:");
    console.log("   - window.miMapa:", typeof window.miMapa !== 'undefined' ? 'âœ… Disponible' : 'âŒ No disponible');
    
    console.log("ğŸ” =================================");
}

// Ejecutar debug inicial
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(debugCompleto, 2000); // Esperar 2 segundos para que todo cargue
});

// Debug de errores de recursos
window.addEventListener('error', function(e) {
    if (e.target !== window) {
        console.error("âŒ DEBUG - Error cargando recurso:", {
            elemento: e.target.tagName,
            src: e.target.src || e.target.href,
            error: e.message
        });
    }
});

// Debug de errores no capturados
window.addEventListener('unhandledrejection', function(e) {
    console.error("âŒ DEBUG - Promise rechazada:", e.reason);
});
</script>